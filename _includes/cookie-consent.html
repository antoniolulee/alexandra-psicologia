<!-- Cookie Consent Component -->
<div x-data="{ 
    show: false,
    init() {
        // Check if cookie consent is already given
        if (!localStorage.getItem('cookieConsent')) {
            // Delay showing slightly for better UX
            setTimeout(() => {
                this.show = true;
                // Auto-dismiss after 10 seconds if not interacted with
                setTimeout(() => {
                    this.show = false;
                }, 10000);
            }, 1000);
        }
    },
    accept() {
        localStorage.setItem('cookieConsent', 'true');
        this.show = false;
    }
}" x-show="show" x-transition:enter="transition ease-out duration-300"
  x-transition:enter-start="opacity-0 translate-y-4" x-transition:enter-end="opacity-100 translate-y-0"
  x-transition:leave="transition ease-in duration-300" x-transition:leave-start="opacity-100 translate-y-0"
  x-transition:leave-end="opacity-0 translate-y-4" class="fixed bottom-4 right-4 z-50 max-w-sm w-full mx-4 sm:mx-0"
  style="display: none;"> <!-- Hidden by default to prevent FOUC until Alpine loads -->

  <div
    class="bg-white dark:bg-dark-secondary-alt border border-border dark:border-dark-border rounded-lg shadow-lg p-6 flex flex-col gap-4">
    <div class="flex justify-between items-start">
      <h3 class="text-lg font-heading font-semibold text-primary dark:text-dark-primary">Uso de Cookies</h3>
      <button @click="show = false"
        class="text-text-muted hover:text-text dark:text-dark-text-muted dark:hover:text-dark-text transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <p class="text-sm text-text-muted dark:text-dark-text-muted leading-relaxed">
      Utilizamos cookies propias y de terceros para mejorar nuestros servicios.
      Si continúas navegando, consideramos que aceptas su uso.
      <a href="/cookies/"
        class="text-primary hover:text-primary-hover dark:text-dark-primary dark:hover:text-dark-primary-hover underline decoration-1 underline-offset-2 transition-colors">Leer
        política</a>.
    </p>

    <div class="flex justify-end">
      <button @click="accept()"
        class="px-6 py-2 bg-primary hover:bg-primary-hover text-white dark:bg-dark-primary dark:hover:bg-dark-primary-hover rounded-md text-sm font-medium transition-colors duration-300 shadow-sm">
        Aceptar
      </button>
    </div>
  </div>
</div>