<!-- FAQ Section -->
<section id="faq" class="py-16 lg:py-24" x-data="{ openItem: null }">
  <div class="max-w-4xl mx-auto px-6">

    <!-- Header -->
    <div class="text-center mb-16">
      <h2
        class="font-heading text-3xl md:text-4xl lg:text-5xl text-text dark:text-dark-text leading-heading tracking-heading mb-4">
        {{ site.data.site.faq.title }}
      </h2>
      <p class="text-lg text-text-muted dark:text-dark-text-muted max-w-2xl mx-auto">
        {{ site.data.site.faq.subtitle }}
      </p>
    </div>

    <!-- FAQ Accordion -->
    <div class="space-y-4">
      {% for item in site.data.site.faq.items %}
      <div
        class="border border-border dark:border-dark-border rounded-lg overflow-hidden bg-white dark:bg-dark-secondary transition-colors duration-300">

        <!-- Question -->
        <button @click="openItem = openItem === {{ forloop.index }} ? null : {{ forloop.index }}"
          class="w-full px-6 py-5 text-left flex items-center justify-between gap-4 hover:bg-secondary-alt dark:hover:bg-dark-secondary-alt transition-colors duration-300"
          :aria-expanded="openItem === {{ forloop.index }}">
          <h3 class="font-heading text-lg text-text dark:text-dark-text pr-4">
            {{ item.question }}
          </h3>

          <svg class="w-5 h-5 text-primary dark:text-dark-primary flex-shrink-0 transition-transform duration-300"
            :class="{ 'rotate-180': openItem === {{ forloop.index }} }" fill="none" stroke="currentColor"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>

        <!-- Answer -->
        <div x-show="openItem === {{ forloop.index }}" x-transition:enter="transition ease-out duration-300"
          x-transition:enter-start="opacity-0 -translate-y-2" x-transition:enter-end="opacity-100 translate-y-0"
          x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0"
          x-transition:leave-end="opacity-0 -translate-y-2" class="px-6 pb-5">
          <p class="text-text-muted dark:text-dark-text-muted leading-relaxed">
            {{ item.answer }}
          </p>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- CTA -->
    <div class="text-center mt-12">
      <p class="text-text-muted dark:text-dark-text-muted mb-4">
        ¿Tienes más preguntas?
      </p>
      <a href="https://wa.me/{{ site.data.site.contact.whatsapp }}?text={{ site.data.site.contact.whatsapp_msg | url_encode }}"
        target="_blank" rel="noopener noreferrer"
        class="inline-flex items-center gap-2 text-primary dark:text-dark-primary hover:text-primary-hover dark:hover:text-dark-primary-hover font-medium transition-colors duration-300">
        <span>Escríbeme directamente</span>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
        </svg>
      </a>
    </div>

  </div>
</section>