<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Preconnect for Performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Tailwind CSS (Critical) -->
  <link rel="stylesheet" href="/assets/css/tailwind.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">

  <!-- Google Fonts (Non-blocking) -->
  <link rel="preload" as="style"
    href="https://fonts.googleapis.com/css2?family=Allura&family=Lato:wght@300;400;700&family=Playfair+Display:wght@400;500;600;700&display=swap">
  <link
    href="https://fonts.googleapis.com/css2?family=Allura&family=Lato:wght@300;400;700&family=Playfair+Display:wght@400;500;600;700&display=swap"
    rel="stylesheet" media="print" onload="this.media='all'">
  <noscript>
    <link
      href="https://fonts.googleapis.com/css2?family=Allura&family=Lato:wght@300;400;700&family=Playfair+Display:wght@400;500;600;700&display=swap"
      rel="stylesheet">
  </noscript>

  <!-- Preload LCP Image (Hero) -->
  {% if page.url == '/' or page.url == '/index.html' %}
  <link rel="preload" as="image" href="{{ site.data.site.hero.image }}" fetchpriority="high">
  {% endif %}

  <!-- SEO Meta Tags -->
  {% assign page_title = page.title | default: nil %}
  {% assign page_description = page.description | default: site.data.seo.meta.description %}
  <title>{% if page_title %}{{ page_title }} | {{ site.data.site.identity.name }}{% else %}{{ site.data.seo.meta.title
    }}{% endif %}</title>
  <meta name="description" content="{{ page_description }}">
  <meta name="keywords" content="{{ site.data.seo.meta.keywords | join: ', ' }}">
  <meta name="author" content="{{ site.data.site.identity.name }}">

  <!-- Open Graph -->
  <meta property="og:type" content="{{ site.data.seo.og.type }}">
  <meta property="og:title"
    content="{% if page_title %}{{ page_title }} | {{ site.data.site.identity.name }}{% else %}{{ site.data.seo.meta.title }}{% endif %}">
  <meta property="og:description" content="{{ page_description }}">
  <meta property="og:image" content="{{ site.url }}{{ site.data.seo.og.image }}">
  <meta property="og:image:alt" content="{{ site.data.seo.og.image_alt }}">
  <meta property="og:url" content="{{ site.url }}{{ page.url }}">
  <meta property="og:locale" content="{{ site.data.seo.og.locale }}">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="{{ site.data.seo.twitter.card }}">
  <meta name="twitter:site" content="{{ site.data.seo.twitter.site }}">
  <meta name="twitter:title"
    content="{% if page_title %}{{ page_title }} | {{ site.data.site.identity.name }}{% else %}{{ site.data.seo.meta.title }}{% endif %}">
  <meta name="twitter:description" content="{{ page_description }}">
  <meta name="twitter:image" content="{{ site.url }}{{ site.data.seo.twitter.image }}">

  <!-- Canonical URL -->
  <link rel="canonical" href="{{ site.url }}{{ page.url }}">

  <!-- Schema.org JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "{{ site.data.seo.schema.type }}",
    "name": "{{ site.data.seo.schema.name }}",
    "description": "{{ site.data.seo.schema.description }}",
    "url": "{{ site.data.seo.schema.url }}",
    "telephone": "{{ site.data.seo.schema.telephone }}",
    "email": "{{ site.data.seo.schema.email }}",
    "address": {
      "@type": "{{ site.data.seo.schema.address.type }}",
      "addressLocality": "{{ site.data.seo.schema.address.addressLocality }}",
      "addressCountry": "{{ site.data.seo.schema.address.addressCountry }}"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": "{{ site.data.seo.schema.geo.latitude }}",
      "longitude": "{{ site.data.seo.schema.geo.longitude }}"
    },
    "priceRange": "{{ site.data.seo.schema.priceRange }}",
    "areaServed": "{{ site.data.seo.schema.areaServed }}",
    "availableLanguage": {{ site.data.seo.schema.availableLanguage | jsonify }},
    "sameAs": {{ site.data.seo.schema.sameAs | jsonify }}
  }
  </script>

  <!-- Dark Mode Detection -->
  <script>
    if (localStorage.getItem('darkMode') === 'true' ||
      (!localStorage.getItem('darkMode') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    }
  </script>
</head>